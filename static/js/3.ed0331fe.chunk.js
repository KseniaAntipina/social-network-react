(this["webpackJsonpsocial-network-react"]=this["webpackJsonpsocial-network-react"]||[]).push([[3],{87:function(e,t,s){"use strict";t.a=s.p+"static/media/user.77e62bce.png"},88:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var o=s(42);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var s=[],o=!0,n=!1,a=void 0;try{for(var r,c=e[Symbol.iterator]();!(o=(r=c.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(i){n=!0,a=i}finally{try{o||null==c.return||c.return()}finally{if(n)throw a}}return s}}(e,t)||Object(o.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},90:function(e,t,s){e.exports={content:"ProfileInfo_content__3729m",wrapContentImageCover:"ProfileInfo_wrapContentImageCover__14hSb",contentImageCover:"ProfileInfo_contentImageCover__3QIyj",contentAvatarWrap:"ProfileInfo_contentAvatarWrap__maD4l",contentAvatar:"ProfileInfo_contentAvatar__14WrA",ownerAvatarEditor:"ProfileInfo_ownerAvatarEditor__37zC1",changePhotoBlock:"ProfileInfo_changePhotoBlock__1Eknb",btnChangeUserPhoto:"ProfileInfo_btnChangeUserPhoto__32RdG",userPhoto:"ProfileInfo_userPhoto__VDXxK",userName:"ProfileInfo_userName__20L_P",status:"ProfileInfo_status__2-slu",statusError:"ProfileInfo_statusError__26CfV",descriptionBlock:"ProfileInfo_descriptionBlock__2HVe7",bthEditProfile:"ProfileInfo_bthEditProfile__3vpAX",profileInfoItem:"ProfileInfo_profileInfoItem__1NUts",profileInfoContactLink:"ProfileInfo_profileInfoContactLink__2a9jB"}},92:function(e,t,s){e.exports={submitPostBox:"MyPosts_submitPostBox__3Ewb3",postUserPhoto:"MyPosts_postUserPhoto__3k4hX"}},93:function(e,t,s){e.exports={postItem:"Post_postItem__ToWHz",ava:"Post_ava__2_-jE",message:"Post_message__1hC_w",postHeader:"Post_postHeader__39U4B",postHeaderInfo:"Post_postHeaderInfo__3Focr",postAuthor:"Post_postAuthor__1hHHq",postDate:"Post_postDate__2X1Zn",postContent:"Post_postContent__3ncde",postLike:"Post_postLike__3HD9E",like:"Post_like__ARnO3"}},96:function(e,t,s){"use strict";s.r(t);var o=s(3),n=s(25),a=s(26),r=s(29),c=s(28),i=s(0),l=s.n(i),u=s(88),j=s(90),f=s.n(j),p=s(1),b=function(e){var t=Object(i.useState)(!1),s=Object(u.a)(t,2),o=s[0],n=s[1],a=Object(i.useState)(e.status),r=Object(u.a)(a,2),c=r[0],l=r[1],j=Object(i.useState)(null),b=Object(u.a)(j,2),d=b[0],h=b[1];Object(i.useEffect)((function(){l(e.status)}),[e.status]);return Object(p.jsxs)(p.Fragment,{children:[!o&&Object(p.jsx)("div",{onClick:function(){return n(!0)},className:f.a.status,children:e.status||"change status..."}),o&&Object(p.jsx)("div",{className:f.a.status,children:Object(p.jsx)("input",{autoFocus:!0,onBlur:function(){return e.updateStatus(c).then((function(){n(!1),h(null)})).catch((function(){return h("Maximum message length 300 characters")}))},onChange:function(e){l(e.currentTarget.value)},value:c})}),Object(p.jsx)("div",{className:f.a.statusError,children:d})]})},d=s(87),h=s(20),m=s(27),O=function(e){var t=e.onSubmit,s=e.profile;return Object(p.jsx)(h.b,{onSubmit:t,initialValues:s,children:function(e){var t=e.handleSubmit,o=e.submitError;return Object(p.jsxs)("form",{onSubmit:t,children:[Object(p.jsx)("button",{className:"".concat(f.a.bthEditProfile," btnDefault"),type:"submit",children:"Save"}),Object(p.jsx)("div",{className:f.a.profileInfoItem,children:Object(p.jsx)(h.a,{name:"fullName",component:m.a,placeholder:"full name"})}),Object(p.jsxs)("div",{className:f.a.profileInfoItem,children:[Object(p.jsx)("span",{children:"looking for a job"}),Object(p.jsx)("span",{style:{display:"inline-block"},children:Object(p.jsx)(h.a,{component:m.a,name:"lookingForAJob",type:"checkbox"})})]}),Object(p.jsxs)("div",{className:f.a.profileInfoItem,children:[Object(p.jsx)("p",{children:"My skills:"})," ",Object(p.jsx)(h.a,{name:"lookingForAJobDescription",component:m.b,placeholder:"my skills"})]}),Object(p.jsxs)("div",{className:f.a.profileInfoItem,children:[Object(p.jsx)("p",{children:"About me:"})," ",Object(p.jsx)(h.a,{name:"aboutMe",component:m.b,placeholder:"about me"})]}),Object(p.jsx)("div",{children:o&&Object(p.jsx)("div",{children:o})}),Object(p.jsxs)("div",{className:f.a.profileInfoItem,children:[Object(p.jsx)("p",{children:"Contacts:"}),Object.keys(s.contacts).map((function(e){return Object(p.jsxs)("div",{className:f.a.profileInfoContactLink,children:[Object(p.jsxs)("p",{children:[" ",e,": "]}),"  ",Object(p.jsx)(h.a,{component:m.a,name:"contacts.".concat([e])})]},e)}))]})]})}})},x=s.p+"static/media/profile-cover.97a7b2bf.jpg",v=function(e){var t=e.profile,s=e.isOwner,o=e.editModeOn;return Object(p.jsxs)("div",{className:f.a.profileInfo,children:[s&&Object(p.jsx)("button",{onClick:o,className:"".concat(f.a.bthEditProfile," btnDefault"),children:"Edit profile"}),Object(p.jsxs)("div",{className:f.a.profileInfoItem,children:[Object(p.jsx)("span",{children:"Looking for a job:"})," ",t.lookingForAJob?"yes":"no"]}),Object(p.jsxs)("div",{className:f.a.profileInfoItem,children:[Object(p.jsx)("span",{children:"My skills: "})," ",t.lookingForAJobDescription]}),Object(p.jsxs)("div",{className:f.a.profileInfoItem,children:[Object(p.jsx)("span",{children:"About me: "})," ",t.aboutMe]}),Object(p.jsxs)("div",{className:f.a.profileInfoItem,children:[Object(p.jsx)("p",{children:"Contacts: "}),Object.keys(t.contacts).map((function(e){return Object(p.jsx)(_,{contactTitle:e,contactValue:t.contacts[e]},e)}))]})]})},_=function(e){var t=e.contactTitle,s=e.contactValue;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:f.a.profileInfoContactLink,children:[t,": ",s,"  "]})})},P=function(e){var t=Object(i.useState)(!1),s=Object(u.a)(t,2),o=s[0],n=s[1],a=Object(i.useRef)(null);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:f.a.content,children:[Object(p.jsx)("div",{className:f.a.wrapContentImageCover,children:Object(p.jsx)("img",{src:x,alt:"\u043e\u0431\u043b\u043e\u0436\u043a\u0430",className:f.a.contentImageCover})}),Object(p.jsx)("div",{className:f.a.contentAvatarWrap,children:Object(p.jsxs)("div",{className:f.a.contentAvatar,children:[Object(p.jsx)("img",{src:e.profile.photos.large||d.a,alt:"profile",className:f.a.userPhoto}),e.isOwner&&Object(p.jsxs)("div",{className:f.a.changePhotoBlock,children:[Object(p.jsx)("input",{ref:a,type:"file",onChange:function(t){t.target.files.length&&e.savePhoto(t.target.files[0])},className:f.a.ownerAvatarEditor}),Object(p.jsx)("div",{onClick:function(e){a.current.click()},className:f.a.btnChangeUserPhoto,children:"Change photo"})]})]})}),Object(p.jsx)("h1",{className:f.a.userName,children:e.profile.fullName}),Object(p.jsx)(b,{status:e.status,updateStatus:e.updateStatus})]}),Object(p.jsx)("div",{className:f.a.descriptionBlock,children:o?Object(p.jsx)(O,{onSubmit:function(t){return e.saveProfile(t).then((function(){n(!1)})).catch((function(e){return e}))},profile:e.profile,initialValues:e.profile}):Object(p.jsx)(v,{profile:e.profile,isOwner:e.isOwner,editModeOn:function(){return n(!0)}})})]})},g=s(41),I=s(92),N=s.n(I),k=s(93),y=s.n(k),C=function(e){return Object(p.jsxs)("div",{className:y.a.postItem,children:[Object(p.jsxs)("div",{className:y.a.postHeader,children:[Object(p.jsx)("img",{className:y.a.ava,src:e.userPhoto,alt:"user photo"}),Object(p.jsxs)("div",{className:y.a.postHeaderInfo,children:[Object(p.jsx)("span",{className:y.a.postAuthor,children:e.userName}),Object(p.jsx)("span",{className:y.a.postDate,children:e.date})]})]}),Object(p.jsx)("div",{className:y.a.postContent,children:Object(p.jsx)("p",{className:y.a.message,children:e.message})}),Object(p.jsxs)("div",{className:y.a.postLike,children:[Object(p.jsx)("img",{src:"https://img.icons8.com/fluent/48/000000/like.png",className:y.a.like,alt:"like"}),Object(p.jsx)("span",{children:e.likeCount})]})]})},S=s(32),w=function(e){var t=e.posts.map((function(t){return Object(p.jsx)(C,{userPhoto:e.profile.photos.large,userName:e.profile.fullName,message:t.post,date:t.date,likeCount:t.likeCount},t.id)}));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:N.a.submitPostBox,children:[Object(p.jsx)("div",{className:N.a.postUserPhoto,children:Object(p.jsx)("img",{src:e.profile.photos.large,alt:"user photo"})}),Object(p.jsx)("div",{className:N.a.postCreate,children:Object(p.jsx)(E,{onSubmit:function(t){e.addPost(t.newPostText,function(){var e=new Date;return"".concat(e.getDate(),".").concat(e.getMonth()+1,".").concat(e.getFullYear())}())}})})]}),Object(p.jsx)("div",{className:N.a.postsBlock,children:Object(p.jsx)("div",{className:N.a.allPosts,children:t})})]})},A=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return function(e){return t.reduce((function(t,s){return t||s(e)}),void 0)}},E=function(e){return Object(p.jsx)(h.b,{onSubmit:e.onSubmit,children:function(e){var t=e.handleSubmit,s=e.form,o=e.submitSucceeded,n=e.values;return o&&(s.reset(),Object.keys(n).forEach((function(e){return s.resetFieldState(e)}))),Object(p.jsxs)("form",{onSubmit:t,children:[Object(p.jsx)(h.a,{name:"newPostText",classname:"newPostText",component:m.b,placeholder:"Write something here...",validate:A(S.b,Object(S.a)(200))}),Object(p.jsx)("button",{className:"".concat(N.a.bthPublishPost," btnDefault"),children:"Publish"})]})}})},D=s(16),B=Object(D.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText,profile:e.profilePage.profile}}),(function(e){return{addPost:function(t,s){e(Object(g.a)(t,s))}}}))(w),F=s(37),H=function(e){return e.profile?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(P,{savePhoto:e.savePhoto,saveProfile:e.saveProfile,profile:e.profile,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner}),Object(p.jsx)(B,{profile:e.profile})]}):Object(p.jsx)(F.a,{})},M=s(5),U=s(21),T=function(e){Object(r.a)(s,e);var t=Object(c.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(a.a)(s,[{key:"updateProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authUserId)||this.props.history.push("/login"),this.props.getProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.updateProfile()}},{key:"componentDidUpdate",value:function(e,t){e.match.params.userId!==this.props.match.params.userId&&this.updateProfile()}},{key:"render",value:function(){return Object(p.jsx)(H,Object(o.a)(Object(o.a)({},this.props),{},{savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile,isOwner:!this.props.match.params.userId}))}}]),s}(l.a.Component);t.default=Object(U.c)(Object(D.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getProfile:g.c,getStatus:g.d,updateStatus:g.g,savePhoto:g.e,saveProfile:g.f}),M.g)(T)}}]);
//# sourceMappingURL=3.ed0331fe.chunk.js.map